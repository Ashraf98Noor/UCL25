{"ast":null,"code":"import Papa from'papaparse';export const loadCSVData=async()=>{try{const csvUrl=process.env.PUBLIC_URL+'/UCL_24_25_Key_Data - Sheet1.csv';console.log('Attempting to fetch CSV data from:',csvUrl);const response=await fetch(csvUrl);if(!response.ok){console.error('Failed to fetch CSV data:',{status:response.status,statusText:response.statusText,url:csvUrl});throw new Error(`Failed to fetch CSV data: ${response.status} ${response.statusText}`);}const csvText=await response.text();console.log('CSV data fetched successfully, first 100 chars:',csvText.substring(0,100));return new Promise((resolve,reject)=>{Papa.parse(csvText,{header:true,skipEmptyLines:true,transform:(value,field)=>{// Convert numeric fields\nconst numericFields=['Born','MP','Starts','Min','90s','Gls','Ast','G+A','G-PK','PK','PKatt','CrdY','CrdR','xG','npxG','xAG','npxG+xAG','PrgC','PrgP','PrgR','Gls.1','Ast.1','G+A.1','G-PK.1','G+A-PK','xG.1','xAG.1','xG+xAG','npxG.1','npxG+xAG.1'];if(numericFields.includes(field)){// Remove commas from numbers like \"1,222\"\nconst cleanValue=value.replace(/,/g,'');const num=parseFloat(cleanValue);return isNaN(num)?0:num;}return value;},complete:results=>{if(results.errors.length>0){console.error('CSV parsing errors:',results.errors);reject(new Error('Failed to parse CSV data'));return;}console.log('CSV parsing complete, found',results.data.length,'players');resolve(results.data);},error:error=>{console.error('CSV parsing error:',error);reject(error);}});});}catch(error){console.error('Error loading CSV data:',error);throw error;}};","map":{"version":3,"names":["Papa","loadCSVData","csvUrl","process","env","PUBLIC_URL","console","log","response","fetch","ok","error","status","statusText","url","Error","csvText","text","substring","Promise","resolve","reject","parse","header","skipEmptyLines","transform","value","field","numericFields","includes","cleanValue","replace","num","parseFloat","isNaN","complete","results","errors","length","data"],"sources":["/Users/ashrafnoor/Port Repo/UCL 24:25/src/services/csvService.ts"],"sourcesContent":["import Papa from 'papaparse';\nimport { Player } from '../types/player';\n\nexport const loadCSVData = async (): Promise<Player[]> => {\n  try {\n    const csvUrl = process.env.PUBLIC_URL + '/UCL_24_25_Key_Data - Sheet1.csv';\n    console.log('Attempting to fetch CSV data from:', csvUrl);\n    const response = await fetch(csvUrl);\n    if (!response.ok) {\n      console.error('Failed to fetch CSV data:', {\n        status: response.status,\n        statusText: response.statusText,\n        url: csvUrl\n      });\n      throw new Error(`Failed to fetch CSV data: ${response.status} ${response.statusText}`);\n    }\n    const csvText = await response.text();\n    console.log('CSV data fetched successfully, first 100 chars:', csvText.substring(0, 100));\n    \n    return new Promise((resolve, reject) => {\n      Papa.parse(csvText, {\n        header: true,\n        skipEmptyLines: true,\n        transform: (value: string, field: string) => {\n          // Convert numeric fields\n          const numericFields = [\n            'Born', 'MP', 'Starts', 'Min', '90s', 'Gls', 'Ast', 'G+A', 'G-PK', \n            'PK', 'PKatt', 'CrdY', 'CrdR', 'xG', 'npxG', 'xAG', 'npxG+xAG',\n            'PrgC', 'PrgP', 'PrgR', 'Gls.1', 'Ast.1', 'G+A.1', 'G-PK.1',\n            'G+A-PK', 'xG.1', 'xAG.1', 'xG+xAG', 'npxG.1', 'npxG+xAG.1'\n          ] as string[];\n          \n          if (numericFields.includes(field)) {\n            // Remove commas from numbers like \"1,222\"\n            const cleanValue = value.replace(/,/g, '');\n            const num = parseFloat(cleanValue);\n            return isNaN(num) ? 0 : num;\n          }\n          \n          return value;\n        },\n        complete: (results: Papa.ParseResult<Player>) => {\n          if (results.errors.length > 0) {\n            console.error('CSV parsing errors:', results.errors);\n            reject(new Error('Failed to parse CSV data'));\n            return;\n          }\n          console.log('CSV parsing complete, found', results.data.length, 'players');\n          resolve(results.data);\n        },\n        error: (error: Error) => {\n          console.error('CSV parsing error:', error);\n          reject(error);\n        }\n      });\n    });\n  } catch (error) {\n    console.error('Error loading CSV data:', error);\n    throw error;\n  }\n}; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}